#!/usr/bin/env bash
# Intended to be executed in a Bash shell.
[[ -n "${BO_Trace}" ]] && 1>&2 echo "Executing ${BASH_SOURCE}" && [[ "${BO_Trace}" != 'TRACE' ]] && set -vx
# NO: set -e
# NO: trap ... EXIT
###############################################################################
# Clone git repositories, if they have not been cloned already.
# NOTE: I reference my special SSH configuration to handle the connection, see `~/.ssh/config`.

_Script=${HOME}/bin/lib/declare/git.bash
prepare_to_source "${_Script}" && source "${_Script}"
unset _Script

main() {
    # Clone repositories for Sam's Club
    local -r Source=SamsClub
    local -r Connection=MeAt${Source}
    local    Dir
    local -r Profile=legato-pim

    Dir=${HOME}/repo/${Source}/ref/V1
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-client
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-data-validator
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-e2e-tests
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-ingestion
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-omni-validation
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-ops
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-server
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-status-portal
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-sync

    Dir=${HOME}/repo/${Source}/ref/V2
    maybe_clone "${Dir}" "${Connection}:${Profile}" V2-comparator
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-be
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-dags
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-data-validator
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-ingestion
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-integration-tests
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-ops
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-rule-engine
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-ui
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-v2-migration

    Dir=${HOME}/repo/${Source}/ref/unknown
    maybe_clone "${Dir}" "${Connection}:${Profile}" comparator
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-aggregator
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-atg-validator
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-be-archive
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-data-utils
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-ingestion-archive
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-ingestion-atg
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-jobs
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-performance-tests
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-scheduler
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-utils
    maybe_clone "${Dir}" "${Connection}:${Profile}" reconcile-service
    maybe_clone "${Dir}" "${Connection}:${Profile}" rule-engine
    maybe_clone "${Dir}" "${Connection}:${Profile}" slr-comparator
    maybe_clone "${Dir}" "${Connection}:${Profile}" version-comparator

    Dir=${HOME}/repo/${Source}/wip
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-be
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-rule-engine
    maybe_clone "${Dir}" "${Connection}:${Profile}" legato-ui

    return 0
}

main $@

###############################################################################
# NOTE: Uncomment these lines for debugging, placed where needed
# export PS4='$ ' ; set -vx
# Code to debug...
# set +vx

: << 'DisabledContent'
DisabledContent

